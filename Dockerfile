# Використовуємо офіційний образ Playwright для Python.
# Рекомендую використовувати конкретну версію, щоб забезпечити відтворюваність.
# 'jammy' вказує на Ubuntu 22.04, що є стабільною та добре підтримуваною ОС.
# Ви можете перевірити найновіші версії на Docker Hub:
# https://hub.docker.com/r/mcr.microsoft.com/playwright/python
FROM mcr.microsoft.com/playwright/python:v1.44.0-jammy

# Встановлюємо робочу директорію всередині контейнера.
WORKDIR /app

# Копіюємо ваш файл requirements.txt до робочої директорії контейнера.
COPY requirements.txt .

# Встановлюємо Python-залежності, зазначені у requirements.txt.
# Використання --no-cache-dir допомагає зменшити розмір кінцевого образу.
RUN pip install --no-cache-dir -r requirements.txt

# Копіюємо весь ваш проект автотестів (включаючи тести, Page Objects тощо)
# до робочої директорії контейнера.
COPY . .

# Офіційний образ Playwright вже містить встановлені браузери.
# Цей крок (`playwright install`) зазвичай не потрібен, якщо ви вже використовуєте
# офіційний образ, хіба що вам потрібно оновити версії браузерів
# або встановити конкретні браузери, які не входять до вашого базового образу.
# Якщо ви впевнені, що він вам потрібен, залиште. Якщо ні - можете закоментувати.
RUN playwright install chromium --with-deps

# Визначаємо команду, яка буде виконуватися за замовчуванням при запуску контейнера.
# Наприклад, для запуску всіх тестів за допомогою pytest, що знаходяться у папці 'tests/'.
CMD ["pytest", "tests/"]